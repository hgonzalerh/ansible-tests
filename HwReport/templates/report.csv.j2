{# --- helpers --- #}
{% macro csv_row(items) -%}
{{ items | map('default','') | map('string')
         | map('replace','"','""')
         | map('regex_replace','^(.*)$','"\\1"')
         | join(',') }}
{%- endmacro %}
{# --- helpers --- #}
hostname,hostname_en_maquina,memoria,Modelo de Procesador,No. de procesadores,version SO,kernel,virtualizador,direcciones IP,nameservers,discos f√≠sicos
{% for h in hostvars if h != 'localhost' %}
{{ csv_row([
  h,
  hostvars[h].ansible_hostname,
  (hostvars[h].ansible_memtotal_mb | string ) ~ " MB",
  hostvars[h].ansible_processor[2],
  hostvars[h].ansible_processor_count,
  hostvars[h].ansible_distribution_version | default(hostvars[h].ansible_os_name),
  hostvars[h].ansible_kernel,
  hostvars[h].ansible_system_vendor,
  (hostvars[h].ansible_all_ipv4_addresses | default([]) | join(',')),
  (hostvars[h].ansible_dns.nameservers | default([]) | join(',')),
  (hostvars[h].discos_fisicos | default([]) | join(',')),
]) }}
{% endfor %}
